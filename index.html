<!DOCTYPE html>
<html lang="pt">
<head>
<meta charset="UTF-8">
<title>Teste Auditivo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<style>
:root{
  --azul-topo:#EEF6FD;
  --azul-logo:#0054A6;
  --azul-escuro:#002B55;
  --sucesso:#1E88E5;
  --rosa-parente:#E91E63;
  --rosa-parente-escuro:#C2185B;
  --texto:#1f2933;
}

/* QUIOSQUE */
html,body{
  height:100%;
  overflow:hidden;
  user-select:none;
  touch-action:manipulation;
}

/* CORPO */
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,sans-serif;
  background:linear-gradient(to bottom,var(--azul-topo),var(--azul-escuro));
  color:var(--texto);
}

/* LOGO */
.logo{
  position:fixed;
  top:12px;
  left:12px;
  width:100px;
  z-index:1000;
}

/* LAYOUT */
.container{
  height:100%;
}

.content{
  max-width:900px;
  margin:0 auto;
  text-align:center;
  padding:120px 30px 30px; /* centragem anterior */
}

/* TELAS */
.screen{display:none}
.screen.active{display:block}

/* TEXTO */
h1{
  font-size:42px;
  margin-bottom:25px;
  color:var(--azul-logo);
}

p{
  font-size:28px;
  margin-bottom:40px;
  line-height:1.5;
}

/* BOT√ïES */
button,a.cta-link{
  border:none;
  border-radius:22px;
  color:#fff;
  margin:16px;
  cursor:pointer;
  transition:.2s;
  text-decoration:none;
  display:inline-block;
}

.play{
  background:var(--azul-logo);
  font-size:28px;
  padding:28px 60px;
  min-width:300px;
  box-shadow:0 10px 25px rgba(0,0,0,.25);
}

.play:hover,.play.playing{
  background:#003F80;
  transform:translateY(-2px);
}

.yes{
  background:var(--sucesso);
  font-size:24px;
  padding:20px 44px;
}

.no{
  background:var(--rosa-parente);
  font-size:24px;
  padding:20px 44px;
}

.no:hover{
  background:var(--rosa-parente-escuro);
}

/* ANIMA√á√ïES */
@keyframes fadeIn{
  from{opacity:0;transform:translateY(30px)}
  to{opacity:1}
}

.screen.active *{
  animation:fadeIn .6s ease;
}

@keyframes wave{
  0%{box-shadow:0 0 0 rgba(255,255,255,.4)}
  50%{box-shadow:0 0 35px rgba(0,84,166,.7)}
  100%{box-shadow:0 0 0 rgba(255,255,255,.4)}
}

.play.playing::after{
  content:'';
  position:absolute;
  top:50%;
  left:50%;
  width:80%;
  height:80%;
  border-radius:50%;
  transform:translate(-50%,-50%);
  animation:wave 1s infinite;
}

/* RESULTADO */
#resultado-box{
  background:rgba(255,255,255,.95);
  padding:40px;
  border-radius:26px;
  box-shadow:0 20px 40px rgba(0,0,0,.25);
}

#resultado-texto{
  font-size:30px;
  font-weight:bold;
  color:#003F80;
}

#cta{
  display:none;
  margin-top:25px;
  background:var(--azul-logo);
  padding:16px 28px;
  font-size:28px;
}

/* RESPONSIVO */
@media(max-width:1024px){
  h1{font-size:38px}
  p{font-size:26px}
  .play{font-size:26px}
}
</style>
</head>

<body>

<img src="https://i.ibb.co/qYr7Pqbn/parente-ca.png" class="logo">

<div class="container">
<div class="content">

<div class="screen active" id="s1">
  <h1>Bem-vindo ao Teste Auditivo</h1>
  <p>Vamos fazer um simples teste auditivo. √â r√°pido e seguro.</p>
  <button class="play" onclick="next(2)">Come√ßar</button>
</div>

<div class="screen" id="s2">
  <p>Ou√ßa com aten√ß√£o e carregue no bot√£o para ouvir.</p>
  <button class="play" onclick="playSound(this,'a1')">Ouvir som #1</button><br>
  <button class="yes" onclick="resposta(true,3)">Ouvi</button>
  <button class="no" onclick="resposta(false,3)">N√£o ouvi</button>
</div>

<div class="screen" id="s3">
  <p>Ou√ßa com aten√ß√£o e carregue no bot√£o para ouvir.</p>
  <button class="play" onclick="playSound(this,'a4')">Ouvir som #2</button><br>
  <button class="yes" onclick="resposta(true,4)">Ouvi</button>
  <button class="no" onclick="resposta(false,4)">N√£o ouvi</button>
</div>

<div class="screen" id="s4">
  <p>Ou√ßa com aten√ß√£o e carregue no bot√£o para ouvir.</p>
  <button class="play" onclick="playSound(this,'a8')">Ouvir som #3</button><br>
  <button class="yes" onclick="resposta(true,5)">Ouvi</button>
  <button class="no" onclick="resposta(false,5)">N√£o ouvi</button>
</div>

<div class="screen" id="s5">
  <div id="resultado-box">
    <h1>Resultado</h1>
    <p id="resultado-texto"></p>
    <a id="cta" class="cta-link"
       href="https://www.opticaparente.pt/escolha-a-loja-e-marque-a-sua-consulta"
       target="_blank" rel="noopener">
       Marque j√° uma consulta gratuita
    </a>
  </div>
</div>

<audio id="a1" src="1kHz.mp3"></audio>
<audio id="a4" src="4kHz.mp3"></audio>
<audio id="a8" src="8kHz.mp3"></audio>

</div>
</div>

<script>
let ouvidos = 0;
let resetTimer;
const RESET_TIME = 30000;

/* RESET POR INATIVIDADE */
function resetInatividade(){
  clearTimeout(resetTimer);
  resetTimer = setTimeout(reiniciar, RESET_TIME);
}

['click','touchstart','mousemove','keydown'].forEach(e=>{
  document.addEventListener(e, resetInatividade);
});

/* NAVEGA√á√ÉO */
function next(n){
  resetInatividade();
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById('s'+n).classList.add('active');
}

/* RESPOSTAS */
function resposta(ouvi,nextScreen){
  resetInatividade();
  if(ouvi) ouvidos++;
  if(nextScreen===5) mostrarResultado();
  next(nextScreen);
}

/* RESULTADO */
function mostrarResultado(){
  const texto=document.getElementById('resultado-texto');
  const cta=document.getElementById('cta');

  if(ouvidos===3){
    texto.innerHTML="Excelente! Ouviu todos os sons.<br>A sua audi√ß√£o aparenta estar dentro da normalidade.";
    cta.style.display="none";
  }else{
    texto.innerHTML=`Ouviu ${ouvidos} de 3 sons.<br>Recomendamos uma avalia√ß√£o auditiva gratuita.`;
    cta.style.display="inline-block";
  }

  resetInatividade();
}

/* REINICIAR */
function reiniciar(){
  ouvidos=0;
  next(1);
}

/* SOM */
function playSound(btn,id){
  resetInatividade();
  const audio=document.getElementById(id);
  btn.classList.add('playing');
  const t=btn.innerHTML;
  btn.innerHTML="üîä A reproduzir...";
  btn.disabled=true;
  audio.currentTime=0;
  audio.play();
  audio.onended=()=>{
    btn.classList.remove('playing');
    btn.innerHTML=t;
    btn.disabled=false;
  };
}

/* FULLSCREEN */
document.addEventListener('click',()=>{
  if(!document.fullscreenElement){
    document.documentElement.requestFullscreen().catch(()=>{});
  }
},{once:true});
</script>

</body>
</html>
